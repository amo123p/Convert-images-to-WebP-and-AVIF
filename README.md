# 🚀 Python 图片格式转换器 (WebP / AVIF)

一个基于 Tkinter 的图形用户界面 (GUI) 工具，用于批量将图片文件转换为 WebP 或 AVIF 格式。它支持多种图片格式作为输入，并提供了丰富的转换选项，如质量设置、无损压缩、目录结构保持、跳过变大文件以及大图片缩放等。

## ✨ 特性

*   ✅ **批量转换**: 支持将整个文件夹的图片批量转换为 WebP 或 AVIF 格式。
*   ✅ **多种输入格式**: 兼容 JPG, PNG, BMP, GIF, TIFF, ICO 等常见图片格式。
*   ✅ **两种输出格式**:
    *   **WebP**: 兼容性好，压缩率高。
    *   **AVIF**: 压缩率更高，但编码速度较慢，需要 `pillow-avif-plugin` 支持。
*   ✅ **灵活的质量控制**:
    *   通过滑块精确调整输出质量 (1-100)。
    *   提供"高质量"、"均衡"、"高压缩"、"极限压缩"等预设按钮。
    *   支持**无损压缩**选项 (针对 WebP 和 AVIF)。
*   ✅ **目录处理**:
    *   选择是否包含**子目录**。
    *   选择是否**保持原始目录结构**在输出目录中。
*   ✅ **智能转换**:
    *   **跳过变大的文件**: 如果转换后的文件大小反而增加，则保留原文件并复制到输出目录。这有助于避免不必要的质量损失和文件膨胀。
    *   **缩小大图片**: 可选将宽度或高度超过 4K (3840px) 的图片自动等比例缩小，以节省空间并提高处理速度。
*   ✅ **实时日志**: 清晰的转换日志，显示每个文件的处理状态、大小变化，并支持颜色标记 (成功、错误、跳过等)。
*   ✅ **进度显示**: 实时进度条和文件计数。
*   ✅ **操作控制**: 开始、停止转换功能。

## 📸 软件截图

<!-- 请在此处插入您的软件截图。例如: -->
<!-- ![软件截图](screenshot.png) -->

(请在此处添加您的软件截图，命名为 `screenshot.png` 或其他合适名称，并更新上述注释行)

## 📦 安装

1.  **克隆或下载仓库**

    ```bash
    git clone https://github.com/yourusername/image-converter.git # 如果你还没有上传到GitHub，请忽略这行
    cd path/to/your/script # 进入你的脚本所在的目录
    ```

2.  **安装依赖**

    确保您已安装 Python 3.x。然后安装所需的库：

    ```bash
    pip install Pillow
    ```

    *   `tkinter` 通常是 Python 标准库的一部分，随 Python 一同安装。如果运行程序时遇到 `ModuleNotFoundError: No module named 'tkinter'` 错误，您可能需要手动安装 Tkinter 开发包 (例如在 Debian/Ubuntu 上是 `sudo apt-get install python3-tk`) 或在某些环境中尝试 `python -m pip install tkinter`。

    **AVIF 支持 (可选)**:
    如果您想转换到 AVIF 格式，需要额外安装 `pillow-avif-plugin`：

    ```bash
    pip install pillow-avif-plugin
    ```
    如果未安装此插件，AVIF 选项将自动禁用。

## 🚀 使用方法

1.  **运行程序**:
    打开终端或命令提示符，导航到脚本所在的目录，然后运行：

    ```bash
    python your_script_name.py # 将 your_script_name.py 替换为你的脚本文件名，例如 python main.py
    ```

2.  **选择源目录**:
    点击 "源目录" 旁的 `浏览` 按钮，选择包含待转换图片的文件夹。

3.  **选择输出目录**:
    点击 "输出目录" 旁的 `浏览` 按钮，选择转换后图片保存的文件夹。

4.  **选择输出格式**:
    在 "输出格式" 区域，选择 `WebP` 或 `AVIF`。

5.  **调整转换设置**:
    *   **压缩质量**: 使用滑块或预设按钮（如“高质量”、“均衡”等）设置图片质量。如果勾选了“无损压缩”，此选项将禁用。
    *   **无损压缩**: 勾选此选项以进行无损转换。
    *   **包含子目录**: 如果源目录中有子文件夹，勾选此项可以处理所有子文件夹中的图片。
    *   **保持目录结构**: 勾选后，输出目录会复制源目录的文件夹结构，将转换后的图片放置在相应的子文件夹中。
    *   **跳过变大的文件**: **推荐勾选**。如果转换后的文件大小反而增加，则不会保存转换后的文件，而是直接将原始文件复制到输出目录。这有助于避免不必要的质量损失和文件膨胀。
    *   **缩小大图片 (>4K)**: 勾选后，宽度或高度超过 3840 像素的图片将被等比例缩小，以节省空间并提高处理速度。

6.  **开始转换**:
    点击 `🚀 开始转换` 按钮启动转换过程。

7.  **查看日志**:
    转换过程中的详细信息、每个文件的处理状态和大小变化都会在底部的“转换日志”区域实时显示。

8.  **停止转换**:
    转换过程中，您可以随时点击 `⏹ 停止` 按钮来中止当前的转换任务。

---
